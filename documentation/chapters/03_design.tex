\chapter{Design}

\section{Component diagram}

The system will be organized in a classical client-server configuration, and the latter will expose RESTful APIs to the clients, and a web application for both OPs and PRs. Every service will be in its own servlet. The component diagram is shown in Figure \ref{fig:component}.

\begin{figure}[h]
    \centering
    \includegraphics[width=\textwidth]{assets/component_diagram.png}
    \caption{Component diagram}
    \label{fig:component}
\end{figure}

\section{Logical description of data}

The data will be stored into a relational database, which will be designed according to the Logical schema in Figure \ref{fig:er}.

\begin{figure}[h]
    \centering
    \includegraphics[width=\textwidth]{assets/er_diagram.png}
    \caption{Logical schema of the database}
    \label{fig:er}
\end{figure}

\input{chapters/031_apiendpoints.tex}

\section{Deployment}

All the webapp will be entirely deployed on the free hosting service \href{www.altervista.org}{Altervista}, which provides a MySQL database and a php server, so all the problems of deployment, reliability, scalability, and security are handled by the service provider.

Particularly, the link to the webapp will be \url{https://lokalinomlud.altervista.org/}

\section{UX design}

The webapp will be designed with a simple and intuitive interface, with a clean and modern look.

The UX is explained at an high level in the flow diagrams in Figures \ref{fig:flow_book_submission} and \ref{fig:flow_op}.

\begin{figure}[ht]
    \centering
    \includegraphics[width=.25\textwidth]{assets/flow_book_submission.png}
    \caption{Flow of the book submission}
    \label{fig:flow_book_submission}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{assets/flow_op.png}
    \caption{Flow of the OP}
    \label{fig:flow_op}
\end{figure}

\section{User interface}
\label{sec:ui}

\begin{figure}[ht]
    \centering
    \includegraphics[width=.5\textwidth]{assets/ui_mockup/login.png}
    \caption{Login page}
    \label{fig:login}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=.75\textwidth]{assets/ui_mockup/dashboard.png}
    \caption{Dashboard}
    \label{fig:dashboard}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=.75\textwidth]{assets/ui_mockup/insert_book.png}
    \caption{Insert book into the system}
    \label{fig:insert_book}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=.75\textwidth]{assets/ui_mockup/pickup_pr.png}
    \caption{Select a PR to pick up its books}
    \label{fig:pickup_pr}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=.75\textwidth]{assets/ui_mockup/pickup_list.png}
    \caption{List of books to pick up from a PR}
    \label{fig:pickup_list}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=.75\textwidth]{assets/ui_mockup/sellpage.png}
    \caption{Books to sell}
    \label{fig:sellpage}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=.75\textwidth]{assets/ui_mockup/cart.png}
    \caption{Cart}
    \label{fig:cart}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=.75\textwidth]{assets/ui_mockup/liquidation.png}
    \caption{Liquidation of a PR}
    \label{fig:liquidation}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=.75\textwidth]{assets/ui_mockup/mailinglist.png}
    \caption{Mailing list}
    \label{fig:mailinglist}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=.65\textwidth]{assets/ui_mockup/booksubmissionform.png}
    \includegraphics[width=.30\textwidth]{assets/ui_mockup/booksubmissionsmartphone.png}
    \caption{PR registration in both scenarios: from a PC and from a smartphone}
    \label{fig:booksubmissionform}
\end{figure}